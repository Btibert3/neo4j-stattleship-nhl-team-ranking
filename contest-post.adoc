=NHL Team Rankings with Stattleship and Neo4j
:neo4j-version: 2.3.0  
:author: Brock  
:twitter: @brocktibert  

== About this entry

This entry is intended to demonsrate how easy it is to use:

1.  Stattleship's [API](http://playbook.stattleship.com/)
2.  the [R package](https://github.com/stattleship/stattleship-r), 
3.  along with [Neo4j](http://neo4j.com/) as a database, 

to  __performance, rank teams, strength of schedule__  very quickly.  

==Assumptions

R is installed, the `RNeo4j` and `StattleshipR` packges are installed, and a Neo4j server is up and running, most likely local.

Lastly, I set Neo4j credentials to neo4j as user=`neo4j` and password=`password`.  And after signing up for a Stattleship Token, I added it to my local R Environment variable using a `.Renviron` file in my local drive `~` with a value of `STATTLE_TOKEN=MYTOKENHERE`.


==Data Model

![](https://dl.dropboxusercontent.com/u/15276022/blog-images/stattle-neo-team-datamodel%20copy.png).

The for this post is over-simplified, but simply consists of `Team` and `Game` nodes, and a relationship that indicates whether the `HOME_TEAM` or the `AWAY_TEAM`.  Both the nodes and the edges have properties, but for this exercise, I am going to focus on the `goals` property on the edge.

## Populate the Database

The R code below connects to the API, grabs the data, and what we need into the database. One note:  I am leveraging the shell tool to import the data by exporting the files I need and leveraging cypher's `LOAD CSV` command in the terminal.  It's not necessary, but for larger datasets, I have found that it has cut down on the import times.  



==Import the data



